#! /bin/bash

#Filtrando Entrada Vazia
if [ -z "$1" ]; then
    echo "                            Forever Hacking                                           "
    echo "             Modo de uso: $0 http://trabalho.com.br                            "
else


        echo "█████████ █████████ █████████ █████████ █████████ █████████ █████████ ███████"
        echo " ░░░░░░░░░ ░░░░░░░░░ ░░░░░░░░░ ░░░░░░░░░ ░░░░░░░░░ ░░░░░░░░░ ░░░░░░░░░ ░░░░░░"
        echo "█████████ █████████ █████████ █████████ █████████ █████████ █████████ ███████"
        echo " ░░░░░░░░░ ░░░░░░░░░ ░░░░░░░░░ ░░░░░░░░░ ░░░░░░░░░ ░░░░░░░░░ ░░░░░░░░░ ░░░░░ "
        echo
        echo "        ███████████       █████████      ███████████      █████████          "
        echo "        ░░███░░░░░███     ███░░░░░███    ░░███░░░░░███     ███░░░░░███       "
        echo "         ░███    ░███    ░███    ░███     ░███    ░███    ░███    ░░░        "
        echo "         ░██████████     ░███████████     ░██████████     ░░█████████        "
        echo "         ░███░░░░░░      ░███░░░░░███     ░███░░░░░███     ░░░░░░░░███       "
        echo "         ░███            ░███    ░███     ░███    ░███     ███    ░███       "
        echo "         █████           █████   █████    █████   █████   ░░█████████        "
        echo "         ░░░░░           ░░░░░   ░░░░░    ░░░░░   ░░░░░     ░░░░░░░░░        "
        echo
        echo " █████████ █████████ █████████ █████████ █████████ █████████ █████████ ██████"
        echo "░░░░░░░░░ ░░░░░░░░░ ░░░░░░░░░ ░░░░░░░░░ ░░░░░░░░░ ░░░░░░░░░ ░░░░░░░░░ ░░░░░░ "
        echo " █████████ █████████ █████████ █████████ █████████ █████████ █████████ ██████"
        echo "░░░░░░░░░ ░░░░░░░░░ ░░░░░░░░░ ░░░░░░░░░ ░░░░░░░░░ ░░░░░░░░░ ░░░░░░░░░ ░░░░░░ "
        echo
        echo "                      Fazendo a análise do site:                                    "
        echo "                   $1                                                               "
        echo
        echo "============================================================================="
        #Filtrando Entrada inválida
        if [[ ! "$1" =~ ^https?:// ]]; then
                echo "============================================================================="
                echo
                echo "                       Endereço de site inválido                             "
                echo 
                echo "============================================================================="
        else
                echo "============================================================================="
                echo
                echo "                      Baixando o Index.html:                                 "
                echo
                echo "============================================================================="
                wget -q -O index.html "$1"
                grep href index.html | cut -d "/" -f3 | grep "\." | cut -d '"' -f1 | grep -v "<l" > lista
                echo
                echo "                    URL                           |          IP"
                echo "-----------------------------------------------------------------------------"

                #Organizando Dados
		            i=1
                while read -r url; do
                        ip=$(host "$url" | grep "has address" | awk '{print $4}')
                        if [[ -n "$ip" ]]; then
                                printf "%-3s %-45s | %s\n" "$i." "$url" "$ip"
                                ((i++))
                        fi
                done < lista
        fi
fi
